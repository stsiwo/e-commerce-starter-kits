endpoint change:
  
  
  - domain calculated values:
    - e.g., cheapest price of the product, avg review points and so on
    
    - create a property of DTO for each domain calculated values so that you don't need to calculate this at front-end again.

    - properties:
    
      - (order) totalCost: prevent front-end from calculating (single source of truth)
      
      - (order) mainImagePath: from the first order detail's product main image (for order list page of member)
      
        
  - /products (GET) 
  
    - isDiscount query does not work correctly. it return empty result even if some variants have discounts.
    
    - min/maxPrice: something is wrong. when 0 (min) - 50 (max), return nothing.
    
  - performance:
  
    - identify N+1 sql using logging & monitor.

      - almost done, but when try to join fetch a deep nested entity such as order.orderDetail.product or variants
        => this will complains about "MultipleBagsException".
    
  - security: 
  
    - trim all string input from client. (need to test)
    
    - cross site request forgery enable. research on this subject since we use cookie (httpOnly&secure).
    
  - refund/cancel/return integration with payment system.
    - make sure it works.

  - hibernate association testing
    - make sure if product is deleted, its associated orders are not deleted and so on.
    
  - async testing 
    - make sure how to handle async event handler at test
   
  - email verification propt  if user still temp user.
 
## staging bugs

(generals)
  
(email)
  - (done) sign up does not send verification email. maybe misconfig of email. => this is due to that you misconfigure company email domain.
  - (done) the domain of company's email must match with SES domain or any domain provider. should notice that to user like adding some note for the company email input.
(product)
    => need to validate (e.g., at least one variant) ?? what is this??
  - (done) should add unique constaint to product name otherwise, it is ambiguous since we don't use any ID when order detail.
  - when upload 5 max images, it causes 'cors' error.
(order)
  - should i send an email to customer when payment failed? yes should do that.
(orderDetail)
  - (done)isReviewable: not working correctly. it's always returning true.

(scheduled tasks)
  - (done) turn is_discount false if product passed the end date.    
  - (doen) create schedule task for make product published when releaseDate.
      
    

## Stripe

  ### Refunds workflows
  
    1) you can program this for automation, or 
    
      - desc: provide UI to the customer so that they can click a button to refunds and process the request when we received.
      
      - concerns: 
        - maybe we need to create refounds policy otherwise, the customer can refunds any time and that would have loss of our business.
    
    2) handle manutally.
    
      - desc: create contact form and ask them to send us refunds request.
      
      - concerns:
        in either way, i need to create refunds policy and contact form.
        
  ### Notification 
  
    - after payment transaction complemeted regardless of success/failure, we need to let the customer know via email.
    
    - use 'webhooks' provided by Stripe. (ref: https://stripe.com/docs/payments/checkout/fulfill-orders)
    
  ### Shipping Cost and Available Countries
  
    - need to decide how to handle it
    
  ### Tax
  
    - there is threshold for GST stuff for government => $30,000
    - there is threshold for PST stuff for province (BC) => $10,000
    
      - so don't need to think about it yet.
    
    - ref: https://jessicamoorhouse.com/sales-tax-in-canada-hst-gst-pst-self-employed/
    - ref: https://help.shopify.com/en/manual/taxes/canada/canada-tax-setup
    
  ### Business Regiatration
  
    - Do I need to register as a business when I want to start selling goods online?
    
      ref: https://www.thebalancesmb.com/as-a-non-canadian-how-can-i-open-a-business-in-canada-2948586
  
  
    
